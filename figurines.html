<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Figurine Playground - Scott Friedman</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/figurines.css">
</head>
<body>
    <!-- Collaborative drawing canvas -->
    <canvas id="whiteboard"></canvas>

    <!-- 3D Figurine Canvas -->
    <canvas id="figurine-canvas"></canvas>

    <!-- Mobile draw mode toggle -->
    <button class="mobile-draw-toggle" aria-label="Toggle draw mode">
        <span class="toggle-icon">âœŽ</span>
    </button>

    <!-- Subtle drawing toolbar -->
    <div class="draw-toolbar">
        <div class="toolbar-group sizes">
            <button class="size-btn" data-size="2" title="Fine"><span></span></button>
            <button class="size-btn active" data-size="4" title="Medium"><span></span></button>
            <button class="size-btn" data-size="8" title="Thick"><span></span></button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group colors">
            <button class="color-btn active" data-color="auto" title="Auto colors">
                <span class="rainbow"></span>
            </button>
            <button class="color-btn" data-color="#2e7d54" title="Emerald"></button>
            <button class="color-btn" data-color="#428995" title="Ocean"></button>
            <button class="color-btn" data-color="#805f8a" title="Plum"></button>
            <button class="color-btn" data-color="#b55d77" title="Berry"></button>
            <button class="color-btn" data-color="#cc6644" title="Sunset"></button>
            <button class="color-btn" data-color="#c7a356" title="Gold"></button>
        </div>
        <div class="toolbar-divider"></div>
        <div class="toolbar-group tools">
            <button class="tool-btn" data-tool="eraser" title="Eraser">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M20 20H7L3 16c-.8-.8-.8-2 0-2.8L14.6 1.6c.8-.8 2-.8 2.8 0l5 5c.8.8.8 2 0 2.8L11 20"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- Figurines Container -->
    <div id="figurines-container"></div>

    <!-- Particles Container (for hearts, food, zzz) -->
    <div id="particles-container"></div>

    <!-- Interaction Toolbar -->
    <div class="figurine-toolbar">
        <button class="tool-btn active" data-tool="move" title="Move figurines">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 9l-3 3 3 3"/>
                <path d="M9 5l3-3 3 3"/>
                <path d="M15 19l-3 3-3-3"/>
                <path d="M19 9l3 3-3 3"/>
                <line x1="2" y1="12" x2="22" y2="12"/>
                <line x1="12" y1="2" x2="12" y2="22"/>
            </svg>
            <span>Move</span>
        </button>
        <button class="tool-btn" data-tool="pet" title="Pet figurines">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
            <span>Pet</span>
        </button>
        <button class="tool-btn" data-tool="feed" title="Feed figurines">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M18 8h1a4 4 0 0 1 0 8h-1"/>
                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                <line x1="6" y1="1" x2="6" y2="4"/>
                <line x1="10" y1="1" x2="10" y2="4"/>
                <line x1="14" y1="1" x2="14" y2="4"/>
            </svg>
            <span>Feed</span>
        </button>
        <button class="tool-btn" data-tool="dance" title="Make figurines dance">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="4" r="2"/>
                <path d="M12 6v4"/>
                <path d="M8 14l4-4 4 4"/>
                <path d="M8 14v4"/>
                <path d="M16 14v4"/>
                <path d="M10 22l2-4 2 4"/>
            </svg>
            <span>Dance</span>
        </button>
        <button class="tool-btn" data-tool="emote" title="Play random emote animation">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                <line x1="9" y1="9" x2="9.01" y2="9"/>
                <line x1="15" y1="9" x2="15.01" y2="9"/>
            </svg>
            <span>Emote</span>
        </button>
        <button class="tool-btn" data-tool="sleep" title="Put figurines to sleep">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
            <span>Sleep</span>
        </button>
        <div class="toolbar-separator"></div>
        <button class="tool-btn" data-tool="call" title="Call figurine here">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/>
            </svg>
            <span>Call</span>
        </button>
    </div>

    <!-- Stats toggle -->
    <button id="toggle-stats" class="toggle-stats" title="Toggle stat bars">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="18" y1="20" x2="18" y2="10"/>
            <line x1="12" y1="20" x2="12" y2="4"/>
            <line x1="6" y1="20" x2="6" y2="14"/>
        </svg>
    </button>

    <!-- Back to home link -->
    <a href="index.html" class="back-home" title="Back to home">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
    </a>

    <!-- Add Figurine Button -->
    <button id="add-figurine-btn" class="add-figurine-btn" title="Add a figurine">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="12" y1="5" x2="12" y2="19"/>
            <line x1="5" y1="12" x2="19" y2="12"/>
        </svg>
    </button>

    <!-- Upload Modal -->
    <div id="upload-modal" class="upload-modal">
        <div class="upload-modal-content">
            <h2>Add New Figurine</h2>
            <button class="close-modal">&times;</button>

            <div class="upload-form">
                <div class="form-group">
                    <label for="figurine-name">Name</label>
                    <input type="text" id="figurine-name" placeholder="Enter figurine name" maxlength="20">
                </div>

                <div class="form-group">
                    <label>3D Model (.glb file)</label>
                    <div class="upload-dropzone" id="upload-dropzone">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                        <p>Drag & drop .glb file here</p>
                        <p class="small">or click to browse</p>
                        <input type="file" id="model-file" accept=".glb,.gltf" hidden>
                    </div>
                    <div class="file-info" id="file-info" style="display: none;">
                        <span class="file-name"></span>
                        <button class="remove-file">&times;</button>
                    </div>
                </div>

                <div class="model-preview" id="model-preview">
                    <canvas id="preview-canvas"></canvas>
                    <p class="preview-placeholder">Model preview will appear here</p>
                </div>

                <div class="form-actions">
                    <button class="btn-cancel" id="cancel-upload">Cancel</button>
                    <button class="btn-submit" id="submit-figurine" disabled>Add Figurine</button>
                </div>
            </div>

            <div class="upload-help">
                <h4>How to get a 3D model:</h4>
                <ol>
                    <li>Go to <a href="https://meshy.ai" target="_blank">meshy.ai</a></li>
                    <li>Upload your figurine image</li>
                    <li>Wait for 3D generation (~2-5 min)</li>
                    <li>Download as .glb file</li>
                    <li>Upload here!</li>
                </ol>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-storage-compat.js"></script>

    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script src="js/main.js"></script>
    <script src="js/figurines.js"></script>
</body>
</html>
